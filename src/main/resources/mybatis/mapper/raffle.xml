<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.mycompany.let_ffle.dao.RaffleDao">

	<insert id="insertRaffle" parameterType="Raffle">
		<selectKey keyProperty="rno" resultType="int" order="BEFORE">
            SELECT SEQ_RNO.NEXTVAL FROM dual
        </selectKey>
		insert into raffle(rno, rtitle, rsubtitle, rcontent, rcategory,
		rwinnercount, rmissiontype, rstartedat, rfinishedat, rgift)
		values(#{rno},#{rtitle},#{rsubtitle},#{rcontent},#{rcategory},#{rwinnercount},
		#{rmissiontype}, #{rstartedat},#{rfinishedat}, #{rgift})
	</insert>
	
	<!-- insert id = dao메소드명과 동일 parameterType = 파라미터로 받아온 타입 
		 keyProperty = 쿼리 결과로 얻은 시퀀스 값을 rno 속성에 설정, resultType = 쿼리 결과를 int(정수형)을 의미, order = 메인 쿼리 문이 실행 전에
		 <selectkey>쿼리를 실행함 시퀀스 값이 메인 쿼리가 실행되기  전에 먼저 설정되도록 함   -->
	
	<select id="selectByRno" parameterType="int" resultType="Raffle">
		select *
		from raffle
		where rno=#{rno}
	</select>
	
	<!-- select id = dao메소드명과 동일하게 설정, parameterType = 파라미터로 받은 타입, resultType = 리턴 타입 
		 래플 테이블로부터 rno가 조건절 #{rno}와 같은 것만 조회해서 가져옴  -->
	
</mapper>    