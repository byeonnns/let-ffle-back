<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.mycompany.let_ffle.dao.BoardDao">

	<insert id="insertBoard" parameterType="Board">
		<selectKey keyProperty="bno" resultType="int" order="BEFORE">
			SELECT
			SEQ_BNO.NEXTVAL from dual
		</selectKey>
		insert into board (bno, mid, btitle, bcontent, bcategory,
		battachoname, battachtype, battachdata, bhitcount, bcreatedat,
		benabled)
		values
		(#{bno},#{mid},#{btitle},#{bcontent},#{bcategory},#{battachoname},#{battachtype},#{battachdata},#{bhitcount},systimestamp,#{benabled})
	</insert>

	<update id="updateBoard" parameterType="Board">
		update board
		set
		btitle=#{btitle}, bcontent=#{bcontent},
		bcategory=#{bcategory},
		bupdatedat=systimestamp
		<if test="battachdata!=null">
			, battachoname=#{battachoname}
			, battachtype=#{battachtype}
			, battachdata=#{battachdata}
		</if>
		where bno=#{bno}
	</update>
	
	<update id="enabledBoard" parameterType="int">
		update board
		set benabled=0
		where bno=#{bno}
	</update>
	
	<select id="readBoard" parameterType="int" resultType="Board">
		select *
		from board
		where bno =#{bno}
	</select>

</mapper>    